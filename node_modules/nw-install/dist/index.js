import c from"fs";import z from"https";import f from"cli-progress";var l=new f.SingleBar({},f.Presets.rect),h=(t,n,r,e,i,m,s,o)=>new Promise(($,p)=>{i!=="https://nwjs.io"&&(console.log("Invalid mirror. Please try again."),p(1));let g=`${m}/v${t}/nwjs${n==="sdk"?"-sdk":""}-v${t}-${r}-${e}.${r==="linux"?"tar.gz":"zip"}`;z.get(g,a=>{let d=0;l.start(Number(a.headers["content-length"]),0),a.on("data",x=>{d+=x.length,l.increment(),l.update(d)}),a.on("error",x=>{console.log(x),p(1)}),a.on("end",()=>{l.stop(),$(0)}),c.mkdirSync(s,{recursive:!0});let y=c.createWriteStream(`${s}/${o}.${r==="linux"?"tar.gz":"zip"}`);a.pipe(y)})});import P from"path";import b from"extract-zip";import j from"tar";var k=(t,n,r)=>new Promise(e=>{t==="linux"?j.x({file:`${n}/${r}.tar.gz`,C:`${n}`}).then(()=>{e(0)}):b(P.resolve(`${n}/${r}.zip`),{dir:P.resolve(`${n}`)}).then(()=>{e(0)})});import v from"fs";var u=(t,n,r)=>new Promise((e,i)=>{v.rm(`${n}/${r}.${t==="linux"?"tar.gz":"zip"}`,m=>{m&&i(1)}),e(0)});import S from"fs";var w=(t,n,r,e,i,m)=>new Promise((s,o)=>{let $=`${i}/nwjs${n==="sdk"?"sdk":""}-v${t}-${r}-${e}`,p=`${i}/${m}`;S.rename($,p,g=>{g&&o(1)}),s(0)});var B=async(t,n,r,e,i,m,s,o)=>{await h(t,n,r,e,i,m,s,o),await k(r,s,o),await u(r,s,o),await w(t,n,r,e,s,o)};export{B as install,w as rename};
