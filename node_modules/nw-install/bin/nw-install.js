#!/usr/bin/env node

import yargs from "yargs/yargs";
import { hideBin } from "yargs/helpers";

import { install } from "../dist/index.js";

const cli = yargs(hideBin(process.argv))
  .version(false)
  .option("version", {
    type: "string",
    description: "NW.js binary version",
    demandOption: true,
  })
  .option("flavour", {
    alias: "flavor",
    type: "string",
    description: "NW.js build flavour",
    demandOption: true,
  })
  .option("platform", {
    type: "string",
    description: "NW.js supported platforms",
    demandOption: true,
  })
  .option("architecture", {
    type: "string",
    description: "NW.js supported architectures",
    demandOption: true,
  })
  .option("mirror", {
    type: "string",
    description: "NW.js mirrors",
    demandOption: true,
  })
  .option("downloadUrl", {
    type: "string",
    description: "Download page of the mirror",
    demandOption: true,
  })
  .option("outDir", {
    type: "string",
    description: "Directory to store binary",
    demandOption: true,
  })
  .option("outFile", {
    type: "string",
    description: "Name to give downloaded binary",
    demandOption: true,
  })
  .parse();

install(
  cli.version,
  cli.flavour,
  cli.platform,
  cli.architecture,
  cli.mirror,
  cli.downloadUrl,
  cli.outDir,
  cli.outFile,
);
